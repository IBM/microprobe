

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tool: mp_c2mpt &mdash; Microprobe v0.5 - HEAD  Documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=fd3f3429" />

  
    <link rel="shortcut icon" href="_static/minilogo_white_256px2.ico"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=34ebda9d"></script>
      <script src="_static/doctools.js?v=9a2dae69"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="next" title="Tool: mp_epi" href="tools_mp_epi.html" />
    <link rel="prev" title="Tool: mp_bin2objdump" href="tools_mp_bin2objdump.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Microprobe: Microbenchmark Generation Framework
              <img src="_static/minilogo_whiteb_150px.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index_microprobe.html">Microprobe</a></li>
<li class="toctree-l1"><a class="reference internal" href="start.html">Getting started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tools.html">Command line tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="tools_target_definition.html">Command line target definition scheme</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mpt_format.html">Microprobe test (mpt) format</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_ctest_format.html">C test format</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_bin2asm.html">Tool: mp_bin2asm</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_bin2objdump.html">Tool: mp_bin2objdump</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Tool: mp_c2mpt</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-usage">Basic usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tool-work-flow">Tool work-flow</a></li>
<li class="toctree-l3"><a class="reference internal" href="#c-test-format">C test format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#third-party-tool-customization">Third-party tool customization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#customizing-application-binary-interface-parameters">Customizing Application Binary Interface parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#current-limitations">Current limitations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#full-usage">Full usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-outputs">Example outputs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_epi.html">Tool: mp_epi</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_mpt2bin.html">Tool: mp_mpt2bin</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_mpt2elf.html">Tool: mp_mpt2elf</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_mpt2test.html">Tool: mp_mpt2test</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_mpt2trace.html">Tool: mp_mpt2trace</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_objdump2mpt.html">Tool: mp_objdump2mpt</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_seq.html">Tool: mp_seq</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_seqtune.html">Tool: mp_seqtune</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools_mp_target.html">Tool: mp_target</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="devel.html">Development Corner</a></li>
<li class="toctree-l1"><a class="reference internal" href="index_publications.html">Publications</a></li>
<li class="toctree-l1"><a class="reference internal" href="copyright.html">Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Documentation</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Microprobe: Microbenchmark Generation Framework</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="tools.html">Command line tools</a></li>
      <li class="breadcrumb-item active">Tool: mp_c2mpt</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="tools_mp_bin2objdump.html" class="btn btn-neutral float-left" title="Tool: mp_bin2objdump" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tools_mp_epi.html" class="btn btn-neutral float-right" title="Tool: mp_epi" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tool-mp-c2mpt">
<h1>Tool: mp_c2mpt<a class="headerlink" href="#tool-mp-c2mpt" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>C to MicroprobeTest (mpt) tool provides a command-line interface (CLI)
to generate MPT files (<a class="reference internal" href="tools_mpt_format.html"><span class="doc">Microprobe test (mpt) format</span></a>) from C source code by following
certain guidelines (<a class="reference internal" href="tools_ctest_format.html"><span class="doc">C test format</span></a>).
Then, from the MPT format, the user can use existing tools (<a class="reference internal" href="tools.html"><span class="doc">Command line tools</span></a>) to
produce test cases for different environments and formats .</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This tool relies on third-party tools (compilers and object code
inspectors). The microbenchmark generation policy implemented in this tool
reproduces exactly the code provided by the compiler and the object code
inspector. The framework resolves any symbolic references (references to
data, or branch targets) and adds necessary code to initialize the required
registers so that it does not break the target Application Binary Interface.</p>
</div>
</section>
<section id="basic-usage">
<h2>Basic usage<a class="headerlink" href="#basic-usage" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">mp_objdump2mpt</span> <span class="o">-</span><span class="n">T</span> <span class="n">TARGET</span> <span class="o">-</span><span class="n">i</span> <span class="n">OBJDUMP_FILE</span> <span class="o">-</span><span class="n">O</span> <span class="n">MPT_OUTPUT_FILE</span>
</pre></div>
</div>
<p>where:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Flag/Argument</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-T</span> <span class="pre">TARGET</span></code>, <code class="docutils literal notranslate"><span class="pre">--target</span> <span class="pre">TARGET</span></code></p></td>
<td><p>Target definition string. Check: <a class="reference internal" href="tools_target_definition.html"><span class="doc">Command line target definition scheme</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">-i</span> <span class="pre">INPUT_C_FILE</span></code>, <code class="docutils literal notranslate"><span class="pre">--input-c-file</span> <span class="pre">INPUT_C_FILE</span></code></p></td>
<td><p>C test file following the format in <a class="reference internal" href="tools_ctest_format.html"><span class="doc">C test format</span></a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">-O</span> <span class="pre">MPT_OUTPUT_FILE</span></code>, <code class="docutils literal notranslate"><span class="pre">--mpt-output-file</span> <span class="pre">MPT_OUTPUT_FILE</span></code></p></td>
<td><p>Output file name</p></td>
</tr>
</tbody>
</table>
</section>
<section id="tool-work-flow">
<h2>Tool work-flow<a class="headerlink" href="#tool-work-flow" title="Link to this heading"></a></h2>
<p>The figure below summarizes the high-level work-flow of the C to MPT command
line tool:</p>
<figure class="align-center" id="id1" style="width: 100%">
<a class="reference internal image-reference" href="_images/c2mpt_workflow_bw.png"><img alt="C to MPT workflow" src="_images/c2mpt_workflow_bw.png" style="width: 90%;" />
</a>
<figcaption>
<p><span class="caption-number">Fig. 1 </span><span class="caption-text">C to MPT high level work-flow</span><a class="headerlink" href="#id1" title="Link to this image"></a></p>
</figcaption>
</figure>
<p>From a given C file that complies with the <a class="reference internal" href="tools_ctest_format.html"><span class="doc">C test format</span></a>, the
process is two-fold (see top and bottom flows in the figure).</p>
<ol class="arabic simple">
<li><p>The C file is compiled using the local host compiler and executed in the
local host. This process is necessary to obtain the variable values at
run-time just before the test main function <strong>c2mpt_function</strong> (check
<a class="reference internal" href="tools_ctest_format.html"><span class="doc">C test format</span></a>) . Also, the host execution with an exit code
of 0 confirms the correctness of the code that is provided.</p></li>
<li><p>The C file is compiled using the target host compiler (which can be the
same as the local) and then the generated instructions are obtained. The
instruction sequence is extended to add the necessary initialization to
ensure a correct execution of the code. We call this process as <em>environment</em>
<em>construction</em> in the figure. For instance, the stack is defined and the
stack pointer is initialized.</p></li>
</ol>
<p>Finally, all the information (instructions, variables and their contents) is
dumped into a MPT file which can then be used to generate test cases in
different formats.</p>
<p>The user can control some features of this work-flow using the following
flags:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Flag/Argument</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>–no-data-initialization</p></td>
<td><p>Do not run the compiled code locally to get the
contents of registered variables before executing the
<em>c2mpt_function</em>. Only statically specified variable
contents will be dumped in the MPT generated</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--save-temps</span></code></p></td>
<td><p>Store the generated intermediate files permanently;
place them in the input source file directory and name
them based on the source file</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is up to the user to control the compiler behavior in order to generate
a valid test case. For instance, the compiler might consider a function to
be useless and therefore, remove it from the generated code.</p>
</div>
</section>
<section id="c-test-format">
<h2>C test format<a class="headerlink" href="#c-test-format" title="Link to this heading"></a></h2>
<p>The input file has to be compliant with the C test case format in order to
ensure the generation of a correct test case.  Check the section
<a class="reference internal" href="tools_ctest_format.html"><span class="doc">C test format</span></a> for details. For your convenience, the tool provides
a flag to dump an empty C file template, which you can use to start the
specification of the C-based test:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Flag/Argument</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--dump-c2mpt-template</span></code></p></td>
<td><p>Dump a template C file, which can be used afterwards
as an input file</p></td>
</tr>
</tbody>
</table>
</section>
<section id="third-party-tool-customization">
<h2>Third-party tool customization<a class="headerlink" href="#third-party-tool-customization" title="Link to this heading"></a></h2>
<p>As explained in the previous section, this tool relies on third-party tools
to generate the final MPT. Three external tools are required: a local host
compiler, a target host compiler and the objdump utility. By default, <strong>cc</strong>
and <strong>objdump</strong> commands are assumed, but in case that the user needs to
customize these commands, a set of customization flags are provided:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Flag/Argument</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--host-c-compiler</span> <span class="pre">HOST_C_COMPILER</span></code></p></td>
<td><p>Local C compiler (Default:’cc’)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--host-c-compiler-flags</span> <span class="pre">HOST_C_COMPILER_FLAGS</span></code></p></td>
<td><p>Local C compiler flags (Default:’-Wall -Werror -m64
-O3 -Wpedantic -pedantic -pedantic-errors -std=c99’)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--target-c-compiler</span> <span class="pre">TARGET_C_COMPILER</span></code></p></td>
<td><p>Target C compiler (Default:’cc’)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--target-objdump</span> <span class="pre">TARGET_OBJDUMP</span></code></p></td>
<td><p>Target objdump utility (Default:’objdump’)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--target-c-compiler-flags</span> <span class="pre">TARGET_C_COMPILER_FLAGS</span></code></p></td>
<td><p>Target C compiler flags (Default:’-Wall -Werror -m64
-O3 -Wpedantic -pedantic -pedantic-errors -std=c99’)</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only GNU GCC tool-chains (gcc, objdump) are currently supported.</p>
</div>
</section>
<section id="customizing-application-binary-interface-parameters">
<h2>Customizing Application Binary Interface parameters<a class="headerlink" href="#customizing-application-binary-interface-parameters" title="Link to this heading"></a></h2>
<p>The ABI (Application Binary Interface) for a given environment (defined in
<a class="reference external" href="http://refspecs.linuxbase.org/">Linux Foundation - Referenced Specifications</a>  )
specifies the semantics of registers and the calling conventions.
For instance, usually a register is
reserved to point to the stack. So, the code being extracted from the
objdump output requires that certain registers contain appropriate values. This
tool supports the automatic definition of the stack, the automatic
initialization of the stack pointer and the definition of the start symbol.</p>
<p>In case the default values are not appropriate, the user can use the following
flags to change the different options:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Flag/Argument</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--stack-size</span> <span class="pre">STACK_SIZE</span></code></p></td>
<td><p>Stack size in bytes (default: 4096)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--stack-name</span> <span class="pre">STACK_NAME</span></code></p></td>
<td><p>Stack name (Default: microprobe_stack)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">--stack-address</span> <span class="pre">STACK_ADDRESS</span></code></p></td>
<td><p>Stack address (Default: allocated in the data area)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">--end-branch-to-itself</span></code></p></td>
<td><p>End the code with a branch to itself instruction</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The necessary instructions required for initializing the stack pointer
will be added at the beginning of the code (on lower addresses) and the
start code address will be modified accordingly.</p>
</div>
</section>
<section id="current-limitations">
<h2>Current limitations<a class="headerlink" href="#current-limitations" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Code constraints: Do not call library functions in any of the functions to
be included in the final MPT. Notice that this restriction does not affect
the initialization functions that are not included in the MPT.</p></li>
<li><p>Variable initialization constraints: As explained in previous section, the
program is executed locally to obtain the variable values. As a consequence,
in the case that the variable type is not a basic type or a fixed width type
as specified <a class="reference external" href="https://en.wikipedia.org/wiki/C_data_types">here</a>  and if
the local host and the target host endianess and/or struct padding differ,
the initial values of the variables will not be correct. A warning is
triggered to alert the user about this issue.</p></li>
<li><p>Code/Data segment addresses: One should be careful when specifying the
addresses for the code and data regions. Sometimes, the user may face some
limitations for some ranges that are <em>not valid</em> in some environments. For
instance, if you get a segmentation fault when running the test locally and
you are sure that the code is correct and <strong>gdb</strong> is telling you that the
fault is generated during the program loading phase, then it is very likely
that the code/data segment addresses are conflicting with others or they
are out of the valid range for that environment.</p></li>
</ul>
</section>
<section id="full-usage">
<h2>Full usage<a class="headerlink" href="#full-usage" title="Link to this heading"></a></h2>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mp_c2mpt.py: INFO: Processing input arguments...
usage: mp_c2mpt.py [-h] [-P SEARCH_PATH [SEARCH_PATH ...]] [-V] [-v] [-d]
                   [-c CONFIG_FILE [CONFIG_FILE ...]] [-C FORCE_CONFIG_FILE]
                   [--dump-configuration-file OUTPUT_CONFIG_FILE]
                   [--dump-full-configuration-file OUTPUT_CONFIG_FILE]
                   [-A ARCHITECTURE_PATHS] [-M MICROARCHITECTURE_PATHS]
                   [-E ENVIRONMENT_PATHS] -T TARGET [--list-architectures]
                   [--list-microarchitectures] [--list-environments]
                   [--traceback] [--profile PROFILE_OUTPUT]
                   [--host-c-compiler HOST_C_COMPILER]
                   [--host-cxx-compiler HOST_CXX_COMPILER]
                   [--target-c-compiler TARGET_C_COMPILER]
                   [--target-cxx-compiler TARGET_CXX_COMPILER]
                   [--target-objdump TARGET_OBJDUMP]
                   [--host-c-compiler-flags HOST_C_COMPILER_FLAGS]
                   [--host-cxx-compiler-flags HOST_CXX_COMPILER_FLAGS]
                   [--target-c-compiler-flags TARGET_C_COMPILER_FLAGS]
                   [--target-cxx-compiler-flags TARGET_CXX_COMPILER_FLAGS]
                   [-i INPUT_C_FILE] -O OUTPUT_MPT_FILE [-S]
                   [-X DEFAULT_CODE_ADDRESS] [-D DEFAULT_DATA_ADDRESS]
                   [--stack-size STACK_SIZE]
                   [--host-displacement HOST_DISPLACEMENT]
                   [--fix-displacement] [--stack-name STACK_NAME]
                   [--stack-address STACK_ADDRESS] [--no-data-initialization]
                   [--save-temps] [--dump-c2mpt-template]
                   [--end-branch-to-itself]

Microprobe C to MPT tool

optional arguments:
  -h, --help            show this help message and exit
  -P SEARCH_PATH [SEARCH_PATH ...], --default_paths SEARCH_PATH [SEARCH_PATH ...]
                        Default search paths for microprobe target definitions
  -V, --version         Show Microprobe version and exit
  -v, --verbosity       Verbosity level (Values: [0,1,2,3,4]). Each time this
                        argument is specified the verbosity level is
                        increased. By default, no logging messages are shown.
                        These are the four levels available:
                        
                          -v (1): critical messages
                          -v -v (2): critical and error messages
                          -v -v -v (3): critical, error and warning messages
                          -v -v -v -v (4): critical, error, warning and info messages
                        
                        Specifying more than four verbosity flags, will
                        default to the maximum of four. If you need extra
                        information, enable the debug mode (--debug or -d
                        flags).
  -d, --debug           Enable debug mode in Microprobe framework. Lots of
                        output messages will be generated

Configuration arguments:

  Command arguments related to configuration file handling

  -c CONFIG_FILE [CONFIG_FILE ...], --configuration CONFIG_FILE [CONFIG_FILE ...]
                        Configuration file. The configuration files will be
                        readed in order of appearance. Values are reset by the
                        last configuration file in case of non-list values.
                        List values will be appended (not reset)
  -C FORCE_CONFIG_FILE, --force-configuration FORCE_CONFIG_FILE
                        Force configuration file. Use this configuration file
                        as the default start configuration. This disables any
                        system-wide, or user-provided configuration.
  --dump-configuration-file OUTPUT_CONFIG_FILE
                        Dump a configuration file with the actual
                        configuration used
  --dump-full-configuration-file OUTPUT_CONFIG_FILE
                        Dump a configuration file with the actual
                        configuration used plus all the configuration options
                        not set

Target path arguments:

  Command arguments related to target paths

  -A ARCHITECTURE_PATHS, --architecture-paths ARCHITECTURE_PATHS
                        Search path for architecture definitions. Microprobe
                        will search in these paths for architecture
                        definitions
  -M MICROARCHITECTURE_PATHS, --microarchitecture-paths MICROARCHITECTURE_PATHS
                        Search path for microarchitecture definitions.
                        Microprobe will search in these paths for
                        microarchitecture definitions
  -E ENVIRONMENT_PATHS, --environment-paths ENVIRONMENT_PATHS
                        Search path for environment definitions. Microprobe
                        will search in these paths for environment definitions

Target arguments:

  Command arguments related to target specification and queries

  -T TARGET, --target TARGET
                        Target tuple. Microprobe follows a GCC-like target
                        definition scheme, where a target is defined by a
                        tuple as following:
                        
                          &lt;arch-name&gt;-&lt;uarch-name&gt;-&lt;env-name&gt;
                        
                        where:
                        
                          &lt;arch-name&gt;: is the name of the architecture
                          &lt;uarch-name&gt;: is the name of the microarchitecture
                          &lt;env-name&gt;: is the name of the environment
                        
                        One can use --list-* options to get the list of
                        definitions available in the default search paths or
                        the paths specified by the different --*-paths options
  --list-architectures  Generate a list of architectures available in the
                        defined search paths and exit
  --list-microarchitectures
                        Generate a list of microarchitectures available in the
                        defined search paths and exit
  --list-environments   Generate a list of environments available in the
                        defined search paths and exit

Debug arguments:

  Command arguments related to debugging facilities

  --traceback           show a traceback and starts a python debugger (pdb)
                        when an error occurs. &#39;pdb&#39; is an interactive python
                        shell that facilitates the debugging of errors
  --profile PROFILE_OUTPUT
                        dump profiling information into given file (see
                        &#39;pstats&#39; module)

Compilation arguments:

  Command arguments related to compilation options

  --host-c-compiler HOST_C_COMPILER
                        Local C compiler (Default:&#39;cc&#39;)
  --host-cxx-compiler HOST_CXX_COMPILER
                        Local C++ compiler (Default:&#39;c++&#39;)
  --target-c-compiler TARGET_C_COMPILER
                        Target C compiler (Default:&#39;cc&#39;)
  --target-cxx-compiler TARGET_CXX_COMPILER
                        Target C++ compiler (Default:&#39;c++&#39;)
  --target-objdump TARGET_OBJDUMP
                        Target objdump utility (Default:&#39;objdump&#39;)
  --host-c-compiler-flags HOST_C_COMPILER_FLAGS
                        Local C compiler flags (Default:&#39;-Wall -Werror -m64
                        -O3 -pedantic -pedantic-errors -std=c99&#39;)
  --host-cxx-compiler-flags HOST_CXX_COMPILER_FLAGS
                        Local C++ compiler flags (Default:&#39;-Wall -Werror -m64
                        -O3 -pedantic -pedantic-errors -std=c99&#39;)
  --target-c-compiler-flags TARGET_C_COMPILER_FLAGS
                        Target C compiler flags (Default:&#39;-Wall -Werror -m64
                        -O3 -pedantic -pedantic-errors -std=c99&#39;)
  --target-cxx-compiler-flags TARGET_CXX_COMPILER_FLAGS
                        Target C++ compiler flags (Default:&#39;-Wall -Werror -m64
                        -O3 -pedantic -pedantic-errors -std=c99&#39;)

C to MPT arguments:

  Command arguments related to C to MPT tool

  -i INPUT_C_FILE, --input-c-file INPUT_C_FILE
                        C file to process
  -O OUTPUT_MPT_FILE, --output-mpt-file OUTPUT_MPT_FILE
                        Output file name
  -S, --strict          Be strict when parsing objdump input, if not set,
                        silently skip unparsed elements
  -X DEFAULT_CODE_ADDRESS, --default-code-address DEFAULT_CODE_ADDRESS
                        Default code address (default: 0x10030000)
  -D DEFAULT_DATA_ADDRESS, --default-data-address DEFAULT_DATA_ADDRESS
                        Default data address (default: 0x10040000)
  --stack-size STACK_SIZE
                        Stack size in bytes (Default: 4096)
  --host-displacement HOST_DISPLACEMENT
                        Displacement between static objdump code and loaded
                        image on the host. Default computed automatically
  --fix-displacement    If data contains addresses (such as pointers) to code
                        or data regions, the tool will try to fix them adding
                        the necessary displacement
  --stack-name STACK_NAME
                        Stack name (Default: microprobe_stack)
  --stack-address STACK_ADDRESS
                        Stack address (Default: allocated in the data area)
  --no-data-initialization
                        Do not run the compiled code locally to get the
                        contents of registered variables before executing the
                        *c2mpt_function*. Only statically specified variable
                        contents will be dumped in the MPT generated
  --save-temps          Store the generated intermediate files permanently;
                        place them in the input source file directory and name
                        them based on the source file
  --dump-c2mpt-template
                        Dump a template C file, which can be used afterwards
                        as an input file
  --end-branch-to-itself
                        A branch to itself instruction will be added at the
                        end of the test

Environment variables:

  MICROPROBETEMPLATES    Default path for microprobe templates
  MICROPROBEDEBUG        If set, enable debug
  MICROPROBEDEBUGPASSES  If set, enable debug during passes
  MICROPROBEASMHEXFMT    Assembly hexadecimal format. Options:
                         &#39;all&#39; -&gt; All immediates in hex format
                         &#39;address&#39; -&gt; Address immediates in hex format (default)
                         &#39;none&#39; -&gt; All immediate in integer format
  CC                     Default C compiler
  CPP                    Default C++ compiler
  TARGET_OBJDUMP         Default target objdump utility
  CFLAGS                 Default C compiler flags
  CXFLAGS                Default C++ compiler flags
</pre></div>
</div>
</section>
<section id="example-outputs">
<h2>Example outputs<a class="headerlink" href="#example-outputs" title="Link to this heading"></a></h2>
<p class="rubric">Example 1:</p>
<p>Command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">mp_c2mpt</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">T</span> <span class="n">z14</span><span class="o">-</span><span class="n">z14</span><span class="o">-</span><span class="n">z64_linux_gcc</span> <span class="o">-</span><span class="n">i</span> <span class="nb">input</span><span class="o">.</span><span class="n">c</span> <span class="o">-</span><span class="n">O</span> <span class="n">output</span><span class="o">.</span><span class="n">mpt</span>
</pre></div>
</div>
<p>Input file <code class="docutils literal notranslate"><span class="pre">input.c</span></code>:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;c2mpt.h&quot;</span>
<span class="linenos">  2</span>
<span class="linenos">  3</span><span class="cm">/****************************************************************************/</span>
<span class="linenos">  4</span><span class="c1">// Global variables</span>
<span class="linenos">  5</span><span class="c1">//</span>
<span class="linenos">  6</span><span class="c1">// Define in the section below the global variable to be used in the </span>
<span class="linenos">  7</span><span class="c1">// &quot;c2mpt_function&quot; and its subroutines. Variable below are going to be</span>
<span class="linenos">  8</span><span class="c1">// imported to the mpt format. The variables have to be declared first</span>
<span class="linenos">  9</span><span class="c1">// and then, they have to be registered (see example below).</span>
<span class="linenos"> 10</span><span class="c1">//</span>
<span class="linenos"> 11</span><span class="c1">// The following macros are defined to declare variables:</span>
<span class="linenos"> 12</span><span class="c1">//</span>
<span class="linenos"> 13</span><span class="c1">// DECLARE_VARIABLE(type, name, alignment)</span>
<span class="linenos"> 14</span><span class="c1">// DECLARE_VARIABLE_WITH_VALUE(type, name, alignment, init_value)</span>
<span class="linenos"> 15</span><span class="c1">// DECLARE_VARIABLE_ARRAY(type, name, name+dimension, alignment)</span>
<span class="linenos"> 16</span><span class="c1">// DECLARE_VARIABLE_ARRAY_WITH_VALUE(type, name, name+dimension alignment, init_value)</span>
<span class="linenos"> 17</span><span class="c1">//</span>
<span class="linenos"> 18</span><span class="c1">// where:</span>
<span class="linenos"> 19</span><span class="c1">//</span>
<span class="linenos"> 20</span><span class="c1">// - type: is the variable type (e.g. char)</span>
<span class="linenos"> 21</span><span class="c1">// - name: is the variable name (e.g. myvar)</span>
<span class="linenos"> 22</span><span class="c1">// - name+dimension: is the name of the array and the dimensions of the array </span>
<span class="linenos"> 23</span><span class="c1">//                   (e.g. myvar[10][20] )</span>
<span class="linenos"> 24</span><span class="c1">// - alignment: is the minimum algnment for the variable                 </span>
<span class="linenos"> 25</span><span class="c1">// - init_value: is the initial value</span>
<span class="linenos"> 26</span><span class="c1">//</span>
<span class="linenos"> 27</span><span class="c1">// The following macros are defined to register the variables:</span>
<span class="linenos"> 28</span><span class="c1">//</span>
<span class="linenos"> 29</span><span class="c1">// BEGIN_VARIABLE_REGISTRATION</span>
<span class="linenos"> 30</span><span class="c1">// REGISTER_VARIABLE(name)</span>
<span class="linenos"> 31</span><span class="c1">// END_VARIABLE_REGISTRATION</span>
<span class="linenos"> 32</span><span class="c1">//</span>
<span class="linenos"> 33</span><span class="c1">// where:</span>
<span class="linenos"> 34</span><span class="c1">//</span>
<span class="linenos"> 35</span><span class="c1">// - name: is the variable name to register</span>
<span class="linenos"> 36</span><span class="c1">//</span>
<span class="linenos"> 37</span><span class="cm">/****************************************************************************/</span>
<span class="linenos"> 38</span>
<span class="linenos"> 39</span><span class="cp">#define N 5</span>
<span class="linenos"> 40</span>
<span class="linenos"> 41</span><span class="k">struct</span><span class="w"> </span><span class="nc">node</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 42</span><span class="w">      </span><span class="kt">int64_t</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="linenos"> 43</span><span class="w">      </span><span class="k">struct</span><span class="w"> </span><span class="nc">node</span><span class="w"> </span><span class="o">*</span><span class="n">next</span><span class="p">;</span>
<span class="linenos"> 44</span><span class="p">};</span>
<span class="linenos"> 45</span>
<span class="linenos"> 46</span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">node</span><span class="w"> </span><span class="n">node_t</span><span class="p">;</span>
<span class="linenos"> 47</span><span class="n">node_t</span><span class="w"> </span><span class="n">array</span><span class="p">[</span><span class="n">N</span><span class="p">];</span>
<span class="linenos"> 48</span>
<span class="linenos"> 49</span><span class="n">DECLARE_VARIABLE_ARRAY</span><span class="p">(</span><span class="n">node_t</span><span class="p">,</span><span class="n">linkedlist</span><span class="p">,</span><span class="n">linkedlist</span><span class="p">[</span><span class="n">N</span><span class="p">],</span><span class="k">sizeof</span><span class="p">(</span><span class="n">node_t</span><span class="p">))</span>
<span class="linenos"> 50</span><span class="n">DECLARE_VARIABLE_WITH_VALUE</span><span class="p">(</span><span class="kt">int64_t</span><span class="p">,</span><span class="n">count</span><span class="p">,</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int64_t</span><span class="p">),</span><span class="w"> </span><span class="mh">0xCAFECAFE</span><span class="p">)</span>
<span class="linenos"> 51</span>
<span class="linenos"> 52</span><span class="n">BEGIN_VARIABLE_REGISTRATION</span>
<span class="linenos"> 53</span><span class="n">REGISTER_VARIABLE</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
<span class="linenos"> 54</span><span class="n">REGISTER_VARIABLE</span><span class="p">(</span><span class="n">linkedlist</span><span class="p">)</span>
<span class="linenos"> 55</span><span class="n">END_VARIABLE_REGISTRATION</span>
<span class="linenos"> 56</span>
<span class="linenos"> 57</span><span class="cm">/****************************************************************************/</span>
<span class="linenos"> 58</span><span class="c1">// Function declaration </span>
<span class="linenos"> 59</span><span class="c1">//</span>
<span class="linenos"> 60</span><span class="c1">// Declare the functions to be converted to the MPT format. It is mandatory </span>
<span class="linenos"> 61</span><span class="c1">// to define a &quot;c2mpt_function&quot;, which will be the &quot;main&quot; of the test. Also</span>
<span class="linenos"> 62</span><span class="c1">// include any related subroutines. The related subroutines have to be</span>
<span class="linenos"> 63</span><span class="c1">// defined using the MPT_FUNCTION(signature) macro provided.</span>
<span class="linenos"> 64</span><span class="c1">//</span>
<span class="linenos"> 65</span><span class="c1">// The function signature for the main c2mpt_function should not be modified.</span>
<span class="linenos"> 66</span><span class="c1">// It does not have any parameter. One can use global variables to pass parameters</span>
<span class="linenos"> 67</span><span class="c1">// to the function (see the example).</span>
<span class="linenos"> 68</span><span class="c1">//</span>
<span class="linenos"> 69</span><span class="cm">/****************************************************************************/</span>
<span class="linenos"> 70</span>
<span class="linenos"> 71</span><span class="n">MPT_FUNCTION</span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="n">my_subroutine</span><span class="p">(</span><span class="kt">int64_t</span><span class="w"> </span><span class="n">count</span><span class="p">))</span>
<span class="linenos"> 72</span>
<span class="linenos"> 73</span><span class="cm">/****************************************************************************/</span>
<span class="linenos"> 74</span><span class="c1">// Function implementation</span>
<span class="linenos"> 75</span><span class="c1">//</span>
<span class="linenos"> 76</span><span class="c1">// Include below the implementation of the routines defined above, which</span>
<span class="linenos"> 77</span><span class="c1">// should be included in the mpt. They should not call functions not defined </span>
<span class="linenos"> 78</span><span class="c1">// here because the test should be self-contained to be reproduced safely.</span>
<span class="linenos"> 79</span><span class="c1">//</span>
<span class="linenos"> 80</span><span class="c1">// Remember to defined the &quot;c2mpt_function&quot; main function.</span>
<span class="linenos"> 81</span><span class="c1">//</span>
<span class="linenos"> 82</span><span class="cm">/****************************************************************************/</span>
<span class="linenos"> 83</span>
<span class="linenos"> 84</span><span class="kt">void</span><span class="w"> </span><span class="n">c2mpt_function</span><span class="p">()</span>
<span class="linenos"> 85</span><span class="p">{</span>
<span class="linenos"> 86</span>
<span class="linenos"> 87</span><span class="w">    </span><span class="n">node_t</span><span class="o">*</span><span class="w"> </span><span class="n">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">linkedlist</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="linenos"> 88</span><span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="n">node</span><span class="o">-&gt;</span><span class="n">next</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span>
<span class="linenos"> 89</span><span class="w">    </span><span class="p">{</span>
<span class="linenos"> 90</span><span class="w">        </span><span class="n">node</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">node</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
<span class="linenos"> 91</span><span class="w">        </span><span class="n">count</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">node</span><span class="o">-&gt;</span><span class="n">x</span><span class="p">;</span>
<span class="linenos"> 92</span><span class="w">    </span><span class="p">}</span>
<span class="linenos"> 93</span>
<span class="linenos"> 94</span><span class="w">    </span><span class="n">my_subroutine</span><span class="p">(</span><span class="n">count</span><span class="p">);</span>
<span class="linenos"> 95</span>
<span class="linenos"> 96</span><span class="p">}</span>
<span class="linenos"> 97</span>
<span class="linenos"> 98</span><span class="kt">void</span><span class="w"> </span><span class="n">my_subroutine</span><span class="p">(</span><span class="kt">int64_t</span><span class="w"> </span><span class="n">lcount</span><span class="p">)</span>
<span class="linenos"> 99</span><span class="p">{</span>
<span class="linenos">100</span><span class="w">    </span><span class="n">count</span><span class="o">=</span><span class="n">lcount</span><span class="o">+</span><span class="n">lcount</span><span class="p">;</span>
<span class="linenos">101</span><span class="p">}</span>
<span class="linenos">102</span>
<span class="linenos">103</span><span class="cm">/****************************************************************************/</span>
<span class="linenos">104</span><span class="c1">// Initialization function </span>
<span class="linenos">105</span><span class="c1">//</span>
<span class="linenos">106</span><span class="c1">// In case you need to initialize the global variables, you can do that in</span>
<span class="linenos">107</span><span class="c1">// the function below. This function can use any external function</span>
<span class="linenos">108</span><span class="c1">// including IO (e.g. reading values from disk) . This function will not</span>
<span class="linenos">109</span><span class="c1">// be included the mpt.</span>
<span class="linenos">110</span><span class="c1">//</span>
<span class="linenos">111</span><span class="c1">// If you initialize variable pointers, they should point to addresses of </span>
<span class="linenos">112</span><span class="c1">// variables defined to be included in the MPT.</span>
<span class="linenos">113</span><span class="c1">// </span>
<span class="linenos">114</span><span class="cm">/****************************************************************************/</span>
<span class="linenos">115</span>
<span class="linenos">116</span><span class="kt">void</span><span class="w"> </span><span class="n">c2mpt_init_global_vars</span><span class="p">()</span>
<span class="linenos">117</span><span class="p">{</span><span class="w"> </span>
<span class="linenos">118</span><span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">N</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
<span class="linenos">119</span><span class="w">        </span><span class="n">linkedlist</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0102030405060708</span><span class="p">;</span>
<span class="linenos">120</span><span class="w">       </span>
<span class="linenos">121</span><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">&lt;</span><span class="n">N</span><span class="mi">-1</span><span class="p">)</span>
<span class="linenos">122</span><span class="w">        </span><span class="p">{</span>
<span class="linenos">123</span><span class="w">            </span><span class="n">linkedlist</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p">(</span><span class="n">linkedlist</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]);</span>
<span class="linenos">124</span><span class="w">        </span><span class="p">}</span>
<span class="linenos">125</span><span class="w">        </span><span class="k">else</span>
<span class="linenos">126</span><span class="w">        </span><span class="p">{</span>
<span class="linenos">127</span><span class="w">            </span><span class="n">linkedlist</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="linenos">128</span><span class="w">        </span><span class="p">}</span>
<span class="linenos">129</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">130</span><span class="p">}</span>
<span class="linenos">131</span>
</pre></div>
</div>
<p>Output file <code class="docutils literal notranslate"><span class="pre">output.mpt</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">;</span> <span class="n">Microprobe</span> <span class="n">Test</span> <span class="n">Definition</span> <span class="n">File</span>
<span class="linenos"> 2</span><span class="p">[</span><span class="n">MPT</span><span class="p">]</span>
<span class="linenos"> 3</span><span class="n">mpt_version</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="p">;</span>  <span class="n">Format</span> <span class="n">version</span> <span class="n">of</span> <span class="n">this</span> <span class="n">MPT</span> <span class="n">file</span><span class="o">.</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="p">[</span><span class="n">REGISTERS</span><span class="p">]</span> <span class="p">;</span> <span class="n">Section</span> <span class="n">to</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">initial</span> <span class="n">register</span> <span class="n">values</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="p">;</span> <span class="n">Format</span><span class="p">:</span> <span class="n">register</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span> <span class="n">E</span><span class="o">.</span><span class="n">g</span><span class="o">.</span><span class="p">:</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="p">;</span> <span class="n">Set</span> <span class="n">GR0</span><span class="p">,</span> <span class="n">GR1</span> <span class="ow">and</span> <span class="n">GR2</span> <span class="n">register</span> <span class="n">to</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span> <span class="n">values</span> <span class="n">respectively</span>
<span class="linenos">10</span><span class="p">;</span><span class="n">GR0</span> <span class="o">=</span> <span class="mh">0x0</span>
<span class="linenos">11</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="p">[</span><span class="n">DATA</span><span class="p">]</span> <span class="p">;</span> <span class="n">Section</span> <span class="n">to</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">variables</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="p">;</span> <span class="n">Data</span> <span class="n">section</span> <span class="n">default</span> <span class="n">address</span><span class="o">.</span> <span class="n">Variables</span> <span class="n">will</span> <span class="n">be</span> <span class="n">placed</span> <span class="kn">from</span><span class="w"> </span><span class="nn">this</span> <span class="n">address</span>
<span class="linenos">16</span><span class="p">;</span> <span class="k">if</span> <span class="n">their</span> <span class="n">address</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">specified</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="n">default_address</span> <span class="o">=</span> <span class="mh">0x0000000010040000</span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="p">;</span> <span class="n">Variable</span> <span class="n">Declaration</span>
<span class="linenos">21</span><span class="p">;</span> <span class="n">Format</span><span class="p">:</span> <span class="n">var_name</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="n">nelems</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">alignment</span><span class="p">,</span> <span class="n">init_values</span> <span class="p">]</span>
<span class="linenos">22</span><span class="p">;</span> <span class="n">where</span><span class="p">:</span>
<span class="linenos">23</span><span class="p">;</span>   <span class="o">-</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">string</span> <span class="n">specifying</span> <span class="n">the</span> <span class="nb">type</span> <span class="n">of</span> <span class="n">elements</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">variable</span>
<span class="linenos">24</span><span class="p">;</span>   <span class="o">-</span> <span class="n">nelems</span><span class="p">:</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">elements</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">variable</span>
<span class="linenos">25</span><span class="p">;</span>   <span class="o">-</span> <span class="n">address</span> <span class="p">:</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">address</span> <span class="n">of</span> <span class="n">the</span> <span class="n">variable</span><span class="p">,</span> <span class="k">if</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">address</span> <span class="n">will</span> <span class="n">be</span>
<span class="linenos">26</span><span class="p">;</span>               <span class="n">fixed</span><span class="p">,</span> <span class="n">otherwise</span><span class="p">,</span> <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">computer</span> <span class="n">by</span> <span class="n">microprobe</span>
<span class="linenos">27</span><span class="p">;</span>   <span class="o">-</span> <span class="n">alignment</span> <span class="p">:</span> <span class="n">alignment</span> <span class="n">requirements</span> <span class="n">of</span> <span class="n">the</span> <span class="n">variable</span><span class="o">.</span> <span class="n">It</span> <span class="n">should</span> <span class="ow">not</span>
<span class="linenos">28</span><span class="p">;</span>                 <span class="n">conflict</span> <span class="k">with</span> <span class="n">address</span> <span class="k">if</span> <span class="n">specified</span><span class="o">.</span> <span class="n">It</span> <span class="n">can</span> <span class="n">be</span> <span class="nb">set</span> <span class="n">to</span> <span class="kc">None</span>
<span class="linenos">29</span><span class="p">;</span>   <span class="o">-</span> <span class="n">init_values</span> <span class="p">:</span> <span class="k">if</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">a</span> <span class="n">single</span> <span class="n">value</span><span class="p">,</span> <span class="nb">all</span> <span class="n">the</span> <span class="n">elements</span> <span class="n">will</span> <span class="n">be</span>
<span class="linenos">30</span><span class="p">;</span>                   <span class="n">initialized</span> <span class="n">to</span> <span class="n">that</span> <span class="n">value</span><span class="p">,</span> <span class="k">if</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">array</span><span class="p">,</span> <span class="n">elements</span>
<span class="linenos">31</span><span class="p">;</span>                   <span class="n">will</span> <span class="n">be</span> <span class="n">initialized</span> <span class="n">to</span> <span class="n">the</span> <span class="n">values</span> <span class="n">specified</span> <span class="ow">in</span> <span class="n">a</span> <span class="nb">round</span><span class="o">-</span>
<span class="linenos">32</span><span class="p">;</span>                   <span class="n">robin</span> <span class="n">fashion</span><span class="o">.</span> <span class="n">Two</span> <span class="n">special</span> <span class="n">keywords</span> <span class="n">can</span> <span class="n">be</span> <span class="n">specified</span><span class="p">:</span>
<span class="linenos">33</span><span class="p">;</span>                   <span class="n">RNDFP</span> <span class="ow">and</span> <span class="n">RNDINT</span> <span class="n">to</span> <span class="n">initialize</span> <span class="n">the</span> <span class="n">elements</span> <span class="n">to</span> <span class="n">random</span> <span class="n">FP</span>
<span class="linenos">34</span><span class="p">;</span>                   <span class="ow">and</span> <span class="n">random</span> <span class="n">INT</span> <span class="n">values</span>
<span class="linenos">35</span><span class="p">;</span>
<span class="linenos">36</span><span class="p">;</span> <span class="n">Note</span> <span class="n">that</span> <span class="n">variable</span> <span class="n">names</span> <span class="n">ARE</span> <span class="n">NOT</span> <span class="n">case</span> <span class="n">sensitive</span><span class="o">.</span> <span class="n">I</span><span class="o">.</span><span class="n">e</span><span class="o">.</span> <span class="n">VAR</span> <span class="o">=</span> <span class="n">Var</span> <span class="o">=</span> <span class="n">var</span>
<span class="linenos">37</span>
<span class="linenos">38</span><span class="n">count</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;int64_t&quot;</span><span class="p">,</span> <span class="mi">00000001</span><span class="p">,</span> <span class="mh">0x0000000010040050</span><span class="p">,</span> <span class="mh">0x0008</span><span class="p">,</span> <span class="mi">3405695742</span><span class="p">]</span>
<span class="linenos">39</span><span class="n">linkedlist</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;uint8_t&quot;</span><span class="p">,</span> <span class="mi">00000080</span><span class="p">,</span> <span class="mh">0x0000000010040000</span><span class="p">,</span> <span class="mh">0x0000</span><span class="p">,</span> <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
<span class="linenos">40</span><span class="n">microprobe_stack</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;uint8_t&quot;</span><span class="p">,</span> <span class="mi">00004096</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mh">0x0010</span><span class="p">,</span> <span class="kc">None</span><span class="p">]</span>
<span class="linenos">41</span>
<span class="linenos">42</span><span class="p">[</span><span class="n">CODE</span><span class="p">]</span> <span class="p">;</span> <span class="n">Section</span> <span class="n">to</span> <span class="n">specify</span> <span class="n">the</span> <span class="n">code</span>
<span class="linenos">43</span>
<span class="linenos">44</span><span class="p">;</span> <span class="n">Code</span> <span class="n">section</span> <span class="n">default</span> <span class="n">address</span><span class="o">.</span> <span class="n">Code</span> <span class="n">will</span> <span class="n">be</span> <span class="n">placed</span> <span class="kn">from</span><span class="w"> </span><span class="nn">this</span> <span class="n">address</span>
<span class="linenos">45</span><span class="p">;</span> <span class="k">if</span> <span class="n">the</span> <span class="n">instruction</span> <span class="n">address</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">specified</span>
<span class="linenos">46</span>
<span class="linenos">47</span><span class="n">default_address</span> <span class="o">=</span> <span class="mh">0x000000001002fff0</span>
<span class="linenos">48</span>
<span class="linenos">49</span><span class="p">;</span> <span class="n">The</span> <span class="n">code</span> <span class="n">specified</span> <span class="n">after</span> <span class="s1">&#39;instructions&#39;</span> <span class="n">entry</span> <span class="p">(</span><span class="n">below</span><span class="p">)</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">code</span> <span class="n">that</span> <span class="n">will</span> <span class="n">be</span>
<span class="linenos">50</span><span class="p">;</span> <span class="n">processed</span> <span class="n">by</span> <span class="n">microprobe</span><span class="o">.</span> <span class="n">The</span> <span class="n">instruction</span> <span class="nb">format</span> <span class="ow">is</span> <span class="n">similar</span> <span class="n">to</span> <span class="n">GNU</span> <span class="n">assembler</span>
<span class="linenos">51</span><span class="p">;</span> <span class="nb">format</span><span class="p">,</span> <span class="n">it</span> <span class="n">also</span> <span class="n">allows</span> <span class="n">the</span> <span class="n">specification</span> <span class="n">of</span> <span class="n">labels</span> <span class="p">(</span><span class="n">NOT</span> <span class="n">case</span> <span class="n">sensitive</span><span class="p">)</span> <span class="ow">and</span>
<span class="linenos">52</span><span class="p">;</span> <span class="n">references</span> <span class="n">to</span> <span class="n">the</span> <span class="n">declared</span> <span class="n">variables</span><span class="o">.</span> <span class="n">It</span> <span class="ow">is</span> <span class="n">also</span> <span class="n">possible</span> <span class="n">to</span> <span class="n">specify</span> <span class="n">instruction</span>
<span class="linenos">53</span><span class="p">;</span> <span class="n">addresses</span> <span class="ow">and</span> <span class="n">to</span> <span class="n">do</span> <span class="n">code</span> <span class="n">expansion</span> <span class="n">by</span> <span class="n">referencing</span> <span class="n">other</span> <span class="n">user</span>
<span class="linenos">54</span><span class="p">;</span> <span class="n">defined</span> <span class="n">entries</span><span class="o">.</span> <span class="n">Check</span> <span class="n">the</span> <span class="n">example</span> <span class="n">below</span> <span class="n">to</span> <span class="n">see</span> <span class="n">examples</span> <span class="n">of</span> <span class="n">these</span> <span class="n">features</span><span class="o">.</span>
<span class="linenos">55</span><span class="p">;</span>
<span class="linenos">56</span><span class="p">;</span> <span class="o">*****************************************************************************</span>
<span class="linenos">57</span><span class="p">;</span> <span class="o">******</span>  <span class="n">Although</span> <span class="n">Microprobe</span> <span class="n">performs</span> <span class="n">some</span> <span class="n">sanity</span> <span class="n">checks</span><span class="p">,</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">the</span>   <span class="o">********</span>
<span class="linenos">58</span><span class="p">;</span> <span class="o">******</span>  <span class="n">responsibility</span> <span class="n">of</span> <span class="n">the</span> <span class="n">user</span> <span class="n">to</span> <span class="n">define</span> <span class="n">correct</span> <span class="n">code</span><span class="o">.</span>           <span class="o">********</span>
<span class="linenos">59</span><span class="p">;</span> <span class="o">******</span>                                                               <span class="o">********</span>
<span class="linenos">60</span><span class="p">;</span> <span class="o">*****************************************************************************</span>
<span class="linenos">61</span>
<span class="linenos">62</span><span class="n">instructions</span> <span class="o">=</span>
<span class="linenos">63</span>  <span class="o">&lt;</span><span class="n">ELF_ABI_START</span><span class="o">&gt;</span><span class="p">:</span>
<span class="linenos">64</span>    <span class="n">AUIPC</span> <span class="n">x2</span><span class="p">,</span> <span class="o">%</span><span class="n">pcrel_hi</span><span class="p">(</span><span class="n">microprobe_stack</span><span class="p">)</span>             
<span class="linenos">65</span>    <span class="n">ADDI</span> <span class="n">x2</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="o">%</span><span class="n">pcrel_lo</span><span class="p">(</span><span class="n">microprobe_stack_pcrel_1</span><span class="p">)</span>  
<span class="linenos">66</span>    <span class="n">JAL</span> <span class="n">x1</span><span class="p">,</span> <span class="n">c2mpt_function</span>                            
<span class="linenos">67</span>    <span class="n">JAL</span> <span class="n">x1</span><span class="p">,</span> <span class="n">ELF_ABI_EXIT</span>                              
<span class="linenos">68</span>  <span class="mh">0x0000000010030000</span> <span class="o">&lt;</span><span class="n">C2MPT_FUNCTION</span><span class="o">&gt;</span><span class="p">:</span>
<span class="linenos">69</span>    <span class="n">LUI</span> <span class="n">x12</span><span class="p">,</span> <span class="mi">65600</span>                                    
<span class="linenos">70</span>    <span class="n">ADDI</span> <span class="n">x12</span><span class="p">,</span> <span class="n">x12</span><span class="p">,</span> <span class="mh">0x0</span>                                
<span class="linenos">71</span>    <span class="n">C</span><span class="o">.</span><span class="n">LD</span> <span class="n">x15</span><span class="p">,</span> <span class="mh">0x8</span><span class="p">(</span><span class="n">x12</span><span class="p">)</span>                                
<span class="linenos">72</span>    <span class="n">C</span><span class="o">.</span><span class="n">LD</span> <span class="n">x14</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">(</span><span class="n">x12</span><span class="p">)</span>                               
<span class="linenos">73</span>    <span class="n">C</span><span class="o">.</span><span class="n">BEQZ</span> <span class="n">x15</span><span class="p">,</span> <span class="n">C2MPT_FUNCTION</span><span class="o">+</span><span class="mh">0X16</span>                   
<span class="linenos">74</span>    <span class="n">C</span><span class="o">.</span><span class="n">LD</span> <span class="n">x13</span><span class="p">,</span> <span class="mh">0x0</span><span class="p">(</span><span class="n">x15</span><span class="p">)</span>                                
<span class="linenos">75</span>    <span class="n">C</span><span class="o">.</span><span class="n">LD</span> <span class="n">x15</span><span class="p">,</span> <span class="mh">0x8</span><span class="p">(</span><span class="n">x15</span><span class="p">)</span>                                
<span class="linenos">76</span>    <span class="n">C</span><span class="o">.</span><span class="n">ADD</span> <span class="n">x14</span><span class="p">,</span> <span class="n">x13</span>                                    
<span class="linenos">77</span>    <span class="n">C</span><span class="o">.</span><span class="n">BNEZ</span> <span class="n">x15</span><span class="p">,</span> <span class="n">C2MPT_FUNCTION</span><span class="o">+</span><span class="mh">0XE</span>                    
<span class="linenos">78</span>    <span class="n">C</span><span class="o">.</span><span class="n">SLLI</span> <span class="n">x14</span><span class="p">,</span> <span class="mi">1</span>                                     
<span class="linenos">79</span>    <span class="n">C</span><span class="o">.</span><span class="n">SD</span> <span class="n">x14</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">(</span><span class="n">x12</span><span class="p">)</span>                               
<span class="linenos">80</span>    <span class="n">C</span><span class="o">.</span><span class="n">JR</span> <span class="n">x1</span>                                           
<span class="linenos">81</span>  <span class="mh">0x000000001003001C</span> <span class="o">&lt;</span><span class="n">MY_SUBROUTINE</span><span class="o">&gt;</span><span class="p">:</span>
<span class="linenos">82</span>    <span class="n">C</span><span class="o">.</span><span class="n">SLLI</span> <span class="n">x10</span><span class="p">,</span> <span class="mi">1</span>                                     
<span class="linenos">83</span>    <span class="n">LUI</span> <span class="n">x15</span><span class="p">,</span> <span class="mi">65600</span>                                    
<span class="linenos">84</span>    <span class="n">SD</span> <span class="n">x10</span><span class="p">,</span> <span class="mh">0x50</span><span class="p">(</span><span class="n">x15</span><span class="p">)</span>                                 
<span class="linenos">85</span>    <span class="n">C</span><span class="o">.</span><span class="n">JR</span> <span class="n">x1</span>                                           
<span class="linenos">86</span>  <span class="o">&lt;</span><span class="n">ELF_ABI_EXIT</span><span class="o">&gt;</span><span class="p">:</span>
<span class="linenos">87</span>    <span class="n">ADDI</span> <span class="n">x0</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="mh">0x0</span>                                  
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="copyright.html">Copyright</a> IBM Corporation, 2011-2020.
 v0.5 - HEAD .
      <span class="lastupdated">Last updated on Sep 11, 2025.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>